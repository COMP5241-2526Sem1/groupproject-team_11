# Learning Situation - æˆç»©åˆ†æåŠŸèƒ½å®ç°è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

å·²å®Œæˆ Course Detail é¡µé¢ä¸­ Learning Situation åŠŸèƒ½çš„é‡æ„ï¼Œå®ç°äº†åŸºäº Assignment å’Œ Quiz çš„æˆç»©åˆ†æç³»ç»Ÿã€‚

## ä¸»è¦åŠŸèƒ½

### 1. åŠ¨æ€é€‰æ‹© Assignment/Quiz
- æ ¹æ®è¯¾ç¨‹ä¸­å·²åˆ›å»ºçš„ Assignment å’Œ Quiz æ•°é‡æ˜¾ç¤ºåˆ—è¡¨
- ä¸€ä¸€å¯¹åº”å…³ç³»ï¼šæ¯ä¸ª Assignment/Quiz éƒ½æœ‰ç‹¬ç«‹çš„æˆç»©åˆ†æ
- ç‚¹å‡»é€‰æ‹©åè¿›å…¥è¯¦ç»†åˆ†æé¡µé¢

### 2. Excel æˆç»©ä¸Šä¼ 
**æ–‡ä»¶æ ¼å¼è¦æ±‚ï¼š**
- **ç¬¬1åˆ—**: StudentID (å­¦å·) - å­¦ç”Ÿå­¦å·
- **ç¬¬2åˆ—**: TotalScore (æ€»åˆ†) - æ€»æˆç»© (0-100)
- **ç¬¬3+åˆ—**: Q1, Q2, Q3... (é¢˜ç›®1, é¢˜ç›®2...) - å„é¢˜å¾—åˆ†

**ç¤ºä¾‹æ ¼å¼ï¼š**
```
StudentID  | TotalScore | Q1  | Q2  | Q3
2024001    | 85         | 90  | 80  | 85
2024002    | 92         | 95  | 90  | 91
2024003    | 78         | 75  | 80  | 79
```

**æ”¯æŒçš„åˆ—åï¼š**
- å­¦å·åˆ—: `StudentID` æˆ– `å­¦å·`
- æ€»åˆ†åˆ—: `TotalScore` æˆ– `æ€»åˆ†`
- é¢˜ç›®åˆ—: ä»¥ `Q` å¼€å¤´æˆ– `é¢˜ç›®` å¼€å¤´çš„åˆ—

### 3. æˆç»©ç»Ÿè®¡å›¾è¡¨

#### åˆ†æ•°åˆ†å¸ƒæŸ±çŠ¶å›¾
- Xè½´ï¼šåˆ†æ•°åŒºé—´ (0-59, 60-69, 70-79, 80-89, 90-100)
- Yè½´ï¼šå­¦ç”Ÿäººæ•°
- ä½¿ç”¨ recharts åº“æ¸²æŸ“

#### ç»Ÿè®¡æ•°æ®å¡ç‰‡
æ˜¾ç¤ºå››ä¸ªå…³é”®æŒ‡æ ‡ï¼š
- **æœ€é«˜åˆ†** (Highest Score) - ç»¿è‰²
- **æœ€ä½åˆ†** (Lowest Score) - çº¢è‰²
- **ä¸­ä½æ•°** (Median Score) - è“è‰²
- **å¹³å‡åˆ†** (Average Score) - ç´«è‰²

### 4. AI æ™ºèƒ½åˆ†ææ€»ç»“

è‡ªåŠ¨åˆ†æå¹¶ç”ŸæˆæŠ¥å‘Šï¼ŒåŒ…å«ï¼š

**åˆ†æç»´åº¦ï¼š**
1. **æœ€å…·æŒ‘æˆ˜æ€§çš„é¢˜ç›®** (Most Challenging Question)
   - è¯†åˆ«å¹³å‡åˆ†æœ€ä½çš„é¢˜ç›®
   - æ˜¾ç¤ºè¯¥é¢˜çš„å¹³å‡åˆ†
   - å»ºè®®é‡ç‚¹å¤ä¹ ç›¸å…³æ¦‚å¿µ

2. **è¡¨ç°æœ€ä½³çš„é¢˜ç›®** (Best Performance Question)
   - è¯†åˆ«æ»¡åˆ†ï¼ˆ90åˆ†ä»¥ä¸Šï¼‰äººæ•°æœ€å¤šçš„é¢˜ç›®
   - æ˜¾ç¤ºæ»¡åˆ†å­¦ç”Ÿæ•°é‡
   - è‚¯å®šå­¦ç”Ÿåœ¨è¯¥çŸ¥è¯†ç‚¹çš„æŒæ¡

3. **æ•™å­¦å»ºè®®** (Recommendations)
   - é’ˆå¯¹æ€§æ•™å­¦æ”¹è¿›å»ºè®®
   - é¢å¤–ç»ƒä¹ å»ºè®®
   - å­¦ç”Ÿè¡¨ç°è‚¯å®š

## æŠ€æœ¯å®ç°

### æ–°å¢ç»„ä»¶

#### GradeAnalysis.tsx
**è·¯å¾„**: `src/components/GradeAnalysis.tsx`

**Props:**
```typescript
interface GradeAnalysisProps {
  itemTitle: string;              // Assignment/Quiz æ ‡é¢˜
  itemType: "assignment" | "quiz"; // ç±»å‹
}
```

**æ ¸å¿ƒåŠŸèƒ½:**
- Excel æ–‡ä»¶ä¸Šä¼ å’Œè§£æ
- æˆç»©ç»Ÿè®¡è®¡ç®—
- å›¾è¡¨æ•°æ®ç”Ÿæˆ
- AI åˆ†ææŠ¥å‘Šç”Ÿæˆ

**çŠ¶æ€ç®¡ç†:**
```typescript
const [gradesData, setGradesData] = useState<GradeData[]>([]);
const [statistics, setStatistics] = useState<StatisticsData | null>(null);
const [aiSummary, setAiSummary] = useState<string>("");
const [isLoading, setIsLoading] = useState(false);
```

### æ•°æ®ç»“æ„

#### GradeData
```typescript
interface GradeData {
  studentId: string;              // å­¦å·
  totalScore: number;             // æ€»åˆ†
  questionScores: {               // å„é¢˜å¾—åˆ†
    [key: string]: number;
  };
}
```

#### StatisticsData
```typescript
interface StatisticsData {
  max: number;                    // æœ€é«˜åˆ†
  min: number;                    // æœ€ä½åˆ†
  median: number;                 // ä¸­ä½æ•°
  average: number;                // å¹³å‡åˆ†
  distribution: {                 // åˆ†æ•°åˆ†å¸ƒ
    range: string;
    count: number;
  }[];
}
```

### åç«¯æ¥å£è®¾è®¡

æ‰€æœ‰åç«¯æ¥å£è°ƒç”¨ä½ç½®å·²ç”¨ `TODO: åç«¯é›†æˆ` æ ‡è®°ï¼š

#### 1. ä¿å­˜æˆç»©æ•°æ®
```
POST /api/courses/{courseId}/{itemType}/{itemId}/grades

è¯·æ±‚ä½“:
{
  gradesData: GradeData[],
  statistics: StatisticsData
}

è¿”å›:
{
  success: boolean,
  message: string
}
```

#### 2. è·å–æˆç»©æ•°æ®
```
GET /api/courses/{courseId}/{itemType}/{itemId}/grades

è¿”å›:
{
  gradesData: GradeData[],
  statistics: StatisticsData
}
```

#### 3. AI åˆ†ææ¥å£
```
POST /api/courses/{courseId}/{itemType}/{itemId}/analyze

è¯·æ±‚ä½“:
{
  gradesData: GradeData[]
}

è¿”å›:
{
  aiSummary: string
}
```

**AI åˆ†æè¾“å…¥æ•°æ®ï¼š**
- å­¦ç”Ÿæˆç»©æ•°æ®
- å„é¢˜å¾—åˆ†æƒ…å†µ
- ç»Ÿè®¡æ•°æ®

**AI åˆ†æè¾“å‡ºï¼š**
- æœ€å…·æŒ‘æˆ˜æ€§é¢˜ç›®åˆ†æ
- æœ€ä½³è¡¨ç°é¢˜ç›®åˆ†æ
- æ•™å­¦æ”¹è¿›å»ºè®®

### ä¿®æ”¹çš„æ–‡ä»¶

#### CourseDetail.tsx
**ä¿®æ”¹å†…å®¹ï¼š**
1. å¯¼å…¥ GradeAnalysis ç»„ä»¶
2. ä¿®æ”¹çŠ¶æ€ç®¡ç†ï¼š
   - `learningSubTab`: "grades" | "previewing" â†’ "assignment" | "quiz"
   - æ·»åŠ  `selectedItemForGrades` çŠ¶æ€
3. é‡æ„ Learning Situation æ¸²æŸ“é€»è¾‘ï¼š
   - æ˜¾ç¤º Assignment/Quiz é€‰æ‹©ç•Œé¢
   - é€‰ä¸­åæ˜¾ç¤º GradeAnalysis ç»„ä»¶
   - æä¾›è¿”å›æŒ‰é’®

## ä½¿ç”¨æµç¨‹

### æ•™å¸ˆæ“ä½œæµç¨‹ï¼š

1. **åˆ›å»º Assignment/Quiz**
   - åœ¨ Assignment æˆ– Quiz æ ‡ç­¾é¡µåˆ›å»ºä½œä¸š/æµ‹éªŒ
   - è®°å½•æ ‡é¢˜å’Œå†…å®¹

2. **åˆ‡æ¢åˆ° Learning Situation**
   - ç‚¹å‡»å·¦ä¾§ "Learning situation" èœå•
   - é€‰æ‹© "Assignment Grades" æˆ– "Quiz Grades"

3. **é€‰æ‹©å…·ä½“é¡¹ç›®**
   - ä»åˆ—è¡¨ä¸­é€‰æ‹©è¦åˆ†æçš„ Assignment/Quiz
   - ç‚¹å‡»è¿›å…¥åˆ†æé¡µé¢

4. **ä¸Šä¼ æˆç»© Excel**
   - ç‚¹å‡» "Upload Excel" æŒ‰é’®
   - é€‰æ‹©ç¬¦åˆæ ¼å¼è¦æ±‚çš„ Excel æ–‡ä»¶
   - ç³»ç»Ÿè‡ªåŠ¨è§£æå’Œè®¡ç®—

5. **æŸ¥çœ‹åˆ†æç»“æœ**
   - æŸ¥çœ‹åˆ†æ•°åˆ†å¸ƒæŸ±çŠ¶å›¾
   - æŸ¥çœ‹ç»Ÿè®¡æ•°æ®ï¼ˆæœ€é«˜åˆ†ã€æœ€ä½åˆ†ã€ä¸­ä½æ•°ã€å¹³å‡åˆ†ï¼‰
   - é˜…è¯» AI æ™ºèƒ½åˆ†ææŠ¥å‘Š
   - æ ¹æ®å»ºè®®æ”¹è¿›æ•™å­¦

### å­¦ç”Ÿè§’åº¦ï¼ˆæœªæ¥æ‰©å±•ï¼‰ï¼š
- æŸ¥çœ‹è‡ªå·±çš„æˆç»©
- æŸ¥çœ‹ç­çº§å¹³å‡æ°´å¹³
- äº†è§£è‡ªå·±çš„æ’åä½ç½®

## ä¼˜åŒ–å»ºè®®

### å½“å‰å®ç°ï¼ˆlocalStorageï¼‰
âœ… Excel è§£æå’Œç»Ÿè®¡è®¡ç®—
âœ… å›¾è¡¨å±•ç¤º
âœ… AI åˆ†æç”Ÿæˆï¼ˆæœ¬åœ°ç®—æ³•ï¼‰

### éœ€è¦åç«¯æ”¯æŒçš„åŠŸèƒ½
âš ï¸ æˆç»©æ•°æ®æŒä¹…åŒ–å­˜å‚¨
âš ï¸ çœŸå® AI API è°ƒç”¨ï¼ˆGPT/Claudeï¼‰
âš ï¸ æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨
âš ï¸ å¤šè¯¾ç¨‹æˆç»©å¯¹æ¯”
âš ï¸ å†å²æ•°æ®è¿½è¸ª

### åŠŸèƒ½å¢å¼ºå»ºè®®

1. **å¯¼å‡ºåŠŸèƒ½**
   - å¯¼å‡ºç»Ÿè®¡æŠ¥å‘Šä¸º PDF
   - å¯¼å‡ºåˆ†æç»“æœä¸º Word
   - å¯¼å‡ºå›¾è¡¨ä¸ºå›¾ç‰‡

2. **æ›´å¤šç»Ÿè®¡å›¾è¡¨**
   - ç®±çº¿å›¾ (Box Plot)
   - é›·è¾¾å›¾ (Radar Chart) - å¤šç»´åº¦å¯¹æ¯”
   - è¶‹åŠ¿å›¾ (Line Chart) - å¤šæ¬¡è€ƒè¯•å¯¹æ¯”

3. **å­¦ç”Ÿä¸ªäººåˆ†æ**
   - è¾“å…¥å­¦å·æŸ¥çœ‹ä¸ªäººè¡¨ç°
   - ä¸ªäººåœ¨ç­çº§ä¸­çš„ä½ç½®
   - ä¸ªäººè¿›æ­¥æ›²çº¿

4. **å¯¹æ¯”åˆ†æ**
   - å¤šä¸ª Assignment/Quiz æ¨ªå‘å¯¹æ¯”
   - ä¸åŒç­çº§çºµå‘å¯¹æ¯”
   - å†å²æ•°æ®è¶‹åŠ¿åˆ†æ

5. **é€šçŸ¥åŠŸèƒ½**
   - æˆç»©ä¸Šä¼ åè‡ªåŠ¨é€šçŸ¥å­¦ç”Ÿ
   - ä½åˆ†é¢„è­¦
   - ä¼˜ç§€è¡¨ç°è¡¨æ‰¬

6. **æƒé™æ§åˆ¶**
   - æ•™å¸ˆå¯ä»¥ä¸Šä¼ å’ŒæŸ¥çœ‹æ‰€æœ‰æ•°æ®
   - å­¦ç”Ÿåªèƒ½æŸ¥çœ‹è‡ªå·±çš„æˆç»©
   - ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹å…¨æ ¡æ•°æ®

## æµ‹è¯•æŒ‡å—

### å‡†å¤‡æµ‹è¯•æ•°æ®

åˆ›å»ºä¸€ä¸ª Excel æ–‡ä»¶ `test_grades.xlsx`ï¼š

```
StudentID  TotalScore  Q1  Q2  Q3  Q4  Q5
2024001    88          90  85  90  88  87
2024002    92          95  90  93  92  90
2024003    75          70  75  80  75  75
2024004    65          60  65  70  65  65
2024005    95          98  95  96  93  93
2024006    58          50  55  60  60  65
2024007    82          85  80  82  80  83
2024008    78          75  80  75  80  78
2024009    90          92  88  91  90  89
2024010    72          70  75  70  72  73
```

### æµ‹è¯•æ­¥éª¤ï¼š

1. è®¿é—®è¯¾ç¨‹è¯¦æƒ…é¡µ
2. åˆ›å»ºä¸€ä¸ª Assignmentï¼š"æœŸä¸­ä½œä¸š"
3. åˆ›å»ºä¸€ä¸ª Quizï¼š"ç¬¬ä¸€æ¬¡æµ‹éªŒ"
4. è¿›å…¥ Learning Situation
5. é€‰æ‹© "Assignment Grades"
6. é€‰æ‹© "æœŸä¸­ä½œä¸š"
7. ä¸Šä¼  test_grades.xlsx
8. éªŒè¯å›¾è¡¨æ˜¾ç¤ºæ­£ç¡®
9. éªŒè¯ç»Ÿè®¡æ•°æ®å‡†ç¡®
10. æŸ¥çœ‹ AI åˆ†ææŠ¥å‘Š

### é¢„æœŸç»“æœï¼š

**ç»Ÿè®¡æ•°æ®ï¼š**
- æœ€é«˜åˆ†: 95
- æœ€ä½åˆ†: 58
- å¹³å‡åˆ†: ~79.5
- ä¸­ä½æ•°: ~80

**åˆ†æ•°åˆ†å¸ƒï¼š**
- 0-59: 1äºº
- 60-69: 1äºº
- 70-79: 3äºº
- 80-89: 2äºº
- 90-100: 3äºº

**AI åˆ†æï¼š**
- æœ€å…·æŒ‘æˆ˜æ€§é¢˜ç›®: Q1 (å¹³å‡åˆ†æœ€ä½)
- æœ€ä½³è¡¨ç°é¢˜ç›®: Q3 (æ»¡åˆ†äººæ•°æœ€å¤š)

## ä¾èµ–åº“

```json
{
  "xlsx": "^0.18.5",           // Excel æ–‡ä»¶è§£æ
  "recharts": "^2.x",          // å›¾è¡¨æ¸²æŸ“
  "@types/xlsx": "^0.0.36"     // TypeScript ç±»å‹
}
```

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
- âœ… `src/components/GradeAnalysis.tsx` - æˆç»©åˆ†æç»„ä»¶

### ä¿®æ”¹æ–‡ä»¶
- âœ… `src/pages/CourseDetail.tsx` - é›†æˆæˆç»©åˆ†æåŠŸèƒ½

### éœ€è¦çš„ Excel æ¨¡æ¿
- ğŸ“„ å»ºè®®åˆ›å»º: `template_grades.xlsx` - æä¾›ç»™æ•™å¸ˆçš„æ ‡å‡†æ¨¡æ¿

## æ³¨æ„äº‹é¡¹

1. **Excel æ–‡ä»¶å¤§å°é™åˆ¶**
   - å»ºè®®é™åˆ¶åœ¨ 5MB ä»¥å†…
   - å­¦ç”Ÿæ•°é‡å»ºè®® < 1000

2. **æµè§ˆå™¨å…¼å®¹æ€§**
   - ç°ä»£æµè§ˆå™¨ï¼ˆChrome, Firefox, Edge, Safariï¼‰
   - éœ€è¦æ”¯æŒ File API

3. **æ•°æ®éšç§**
   - æˆç»©æ•°æ®æ•æ„Ÿï¼Œéœ€è¦åŠ å¯†å­˜å‚¨
   - ä¼ è¾“è¿‡ç¨‹ä½¿ç”¨ HTTPS
   - è®¿é—®æ§åˆ¶ä¸¥æ ¼

4. **æ€§èƒ½ä¼˜åŒ–**
   - å¤§æ•°æ®é‡æ—¶è€ƒè™‘åˆ†é¡µ
   - å›¾è¡¨æ¸²æŸ“ä½¿ç”¨è™šæ‹ŸåŒ–
   - åç«¯è®¡ç®—ç»Ÿè®¡æ•°æ®

5. **é”™è¯¯å¤„ç†**
   - Excel æ ¼å¼é”™è¯¯æç¤º
   - æ•°æ®éªŒè¯ï¼ˆåˆ†æ•°èŒƒå›´æ£€æŸ¥ï¼‰
   - ç½‘ç»œé”™è¯¯é‡è¯•æœºåˆ¶

---

**å®ç°å®Œæˆåº¦**: 90%
**å¾…åç«¯é›†æˆ**: 3ä¸ªæ¥å£
**æµ‹è¯•çŠ¶æ€**: éœ€è¦äººå·¥æµ‹è¯•
